
{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the Movilo.club application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "email": {
          "type": "string",
          "description": "Email address of the user.",
          "format": "email"
        },
        "firstName": {
          "type": "string",
          "description": "First name of the user."
        },
        "lastName": {
          "type": "string",
          "description": "Last name of the user."
        },
        "phoneNumber": {
          "type": "string",
          "description": "Phone number of the user."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the user account was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp indicating when the user account was last updated.",
          "format": "date-time"
        },
        "socialLoginId": {
          "type": "string",
          "description": "Unique identifier from the social login provider (e.g., Google).",
          "format": "string"
        },
        "socialLoginProvider": {
          "type": "string",
          "description": "The provider that has authenticated the user (e.g. Google, Facebook, Apple)",
          "format": "string"
        }
      },
      "required": [
        "id",
        "email",
        "firstName",
        "lastName",
        "createdAt",
        "updatedAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "google.com"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profile information. Uses path-based ownership: only the authenticated user (or admin, if applicable in the future) can read/write their own document.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user, matching their Firebase Auth UID."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to support user authentication via social login and the Movilo.club application's core features.  The primary principle is Authorization Independence, achieved through denormalization where needed.  User data is stored in a dedicated collection for easy management.  The structure supports secure list operations (QAPs) via path-based ownership for user-specific data. There are no global roles defined in this request (DBAC enforced).\n\n1.  **Users Collection:**  Stores user profiles. Authentication information related to social logins is also stored here.\n\nThis structure allows for simple security rules based on `request.auth.uid` and path-based ownership.\n"
  }
}
